<html>
    <head>
        <title>Arbor Vitae</title>
        <link href="https://fonts.googleapis.com/css?family=Poiret+One" rel="stylesheet">
    </head>
    <body>
    <svg viewBox="0 0 28 28" height="100%">
        <g id="tree" transform="translate(14 28) rotate(180)"></g>
        <g id="wall">
            <circle class="circle" cx="14" cy="14" r="13" fill="none" stroke-dasharray="0.6 0.203" stroke-width="0.3" stroke="#262626"></circle>
        </g>
        <g id="name" transform="translate(5.9 23)">
            <text font-size="2pt" fill="#262626" font-family="Poiret One">Arbor . Vitae</text>
        </g>
    </svg>
    <script>
    const rgbToHex = (r, g, b) => '#' + [r, g, b]
      .map(x => Math.floor(x).toString(16).padStart(2, '0')).join('')

    Math.seed = function(s) {
        var mask = 0xffffffff;
        var m_w  = (123456789 + s) & mask;
        var m_z  = (987654321 - s) & mask;

        return function() {
          m_z = (36969 * (m_z & 65535) + (m_z >>> 16)) & mask;
          m_w = (18000 * (m_w & 65535) + (m_w >>> 16)) & mask;

          var result = ((m_z << 16) + (m_w & 65535)) >>> 0;
          result /= 4294967296;
          return result;
        }
    }

    function createSvgElement(tagname, attributes) {
        var element = document.createElementNS(
            "http://www.w3.org/2000/svg",
            tagname
        );
        Object.entries(attributes)
            .forEach(x => element.setAttributeNS(null, x[0], x[1]));
        return element;
    }

    function group(parent, depth) {
        parent.appendChild(createSvgElement("line", {
            "x1": 0,
            "y1": depth == 0 ? 4 : 0,
            "x2": 0,
            "y2": cfg.length,
            "stroke": rgbToHex(...new Array(3).fill(cfg.alpha *
                    Math.pow(0.80, cfg.maxdepth - depth) * 256)),
            "stroke-width": cfg.width,
        }));
        if (depth >= cfg.maxdepth) return;
        twigs
            .sort(x => random())
            .concat(random() < cfg.extrachance / Math.pow(depth, 0.5) ? [ { angle: 90 * random() - 45 } ] : [])
            .concat(random() < cfg.extrachance / Math.pow(depth, 0.5) ? [ { angle: 90 * random() - 45 } ] : [])
            .concat(random() < cfg.extrachance / Math.pow(depth, 0.5) ? [ { angle: 90 * random() - 45 } ] : [])
            .forEach((twig, i) => {
                var skip = (random() < cfg.skipchance && (i == 0 || i == 3) || i >= 4) ? 2 : 1;
                var g = parent.appendChild(createSvgElement("g", {
                    "transform":
                        "translate(0 " + (cfg.length * 0.95) + ") " + 
                        "scale(" + Math.pow(
                            cfg.scale * (random() * 0.2 + 0.8), 
                            skip * (random() * 0.3 + 0.7)
                        ) + ") " + 
                        "rotate(" + (twig.angle + random() * 20 - 10) + ")"
                }));
                group(g, depth + skip);
            });
    }

    var random = Math.seed(1234);
    var twigs = [
        { angle: -50},
        { angle: -15},
        { angle: 12},
        { angle: 45},
    ];
    var cfg = {
        length: 10,
        alpha: 0.9,
        width: 1,
        scale: 0.6,
        maxdepth: 8,
        extrachance: 0.15,
        skipchance: 0.05,
        //maxtwigs: 8,
        //mintwigs: 3,
        //skipchance: 0.20,
        //phi: (1 + Math.sqrt(5)) / 2,
    };
    document.getElementById("tree").innerHtml = "";
    group(document.getElementById("tree"), 0);

    </script>
    </body>
</html>
